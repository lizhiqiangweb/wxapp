(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/details/details"],{"0480":function(i,e,t){},"0512":function(i,e,t){"use strict";(function(i,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t("0acf");var n={data:function(){return{background:["color1","color2","color3"],current:0,modalName:null,thing_manager:"".concat(this.$env.img1,"thing_manager.png"),detailsBg:"".concat(this.$env.img1,"details_pic.png"),relateBg:"".concat(this.$env.img1,"ranking.png"),location:"".concat(this.$env.img1,"Location@2x.png"),returns:"".concat(this.$env.img1,"return@2x.png"),people:"".concat(this.$env.img1,"villager@2x.png"),msg:"".concat(this.$env.img1,"comment@2x.png"),vote:"".concat(this.$env.img1,"vote@2x.png"),manage:"".concat(this.$env.img1,"plus@2x.png"),mark:"".concat(this.$env.img1,"goldl_03@2x.png"),bg:"".concat(this.$env.img1,"jx@2x.png"),arrow:"".concat(this.$env.img1,"More@2x.png"),share:"".concat(this.$env.img1,"relay@2x.png"),unclick:"".concat(this.$env.img1,"help@2x.png"),click:"".concat(this.$env.img1,"red_help.png"),publish:"".concat(this.$env.img1,"publish@2x.png"),cancel:"".concat(this.$env.img1,"x@2x.png"),noComment:"".concat(this.$env.img1,"pd_no_comment@2x.png"),villageId:"",longitude:"",latitude:"",detailsInfo:[],unAttention:!0,str:"关注",videoImage:"",villageListInfo:{},list:[{img:"".concat(this.$env.img1,"icon_01@2x.png"),font:"村景",id:"1"},{img:"".concat(this.$env.img1,"details_2.png"),font:"特色风采",id:"2"},{img:"".concat(this.$env.img1,"details_3.png"),font:"民宿",id:"3"},{img:"".concat(this.$env.img1,"details_4.png"),font:"景点",id:"4"},{img:"".concat(this.$env.img1,"details_5.png"),font:"村动态",id:"5"},{img:"".concat(this.$env.img1,"details_6.png"),font:"土特产",id:"6"},{img:"".concat(this.$env.img1,"details_7.png"),font:"农家乐",id:"7"}]}},methods:{evaluteListClick:function(){i.navigateTo({url:"../evaluate/evaluate?villageId="+this.villageId})},addVillageEvaluatinParise:function(e,t){var a=this;1==t?a.$request.httpTokenRequest(a.$api.addVillageEvaluatinParise,a.$api.get,{Key:a.$api.Key,Client:a.$api.CLIENT,Version:a.$api.VERSION,evaluateId:e,num:-1}).then(function(e){200===e.data.flag?a.villageDynamics():i.showToast({title:e.data.msg,icon:"none"})}):a.$request.httpTokenRequest(a.$api.addVillageEvaluatinParise,a.$api.get,{Key:a.$api.Key,Client:a.$api.CLIENT,Version:a.$api.VERSION,evaluateId:e,num:1}).then(function(e){200===e.data.flag?a.villageDynamics():i.showToast({title:e.data.msg,icon:"none"})})},shareClick:function(e){i.navigateTo({url:"../share/share?url=chat/chatLine/chatLine&circleID="+e})},voteListClick:function(){i.navigateTo({url:"../voteList/voteList?villageId="+this.villageId})},menuClick:function(e){65==e?i.navigateTo({url:"../scenery/scenery?villageId="+this.villageId+"&isVillager="+this.detailsInfo.village_view.is_villager}):66==e?i.navigateTo({url:"../feature/feature?villageId="+this.villageId+"&isVillager="+this.detailsInfo.village_view.is_villager}):67==e?i.switchTab({url:"../chat/chatList/chatList"}):68==e?i.switchTab({url:"../chat/chatList/chatList"}):69==e?i.navigateTo({url:"../modal/homestay/homestay"}):i.showToast({title:"完善中，耐心等待",icon:"none"})},listClick:function(e){"1"==e?(i.navigateTo({url:"../scenery/scenery?villageId="+this.villageId+"&isVillager="+this.detailsInfo.village_view.is_villager}),this.hideModal()):"2"==e?(i.navigateTo({url:"../feature/feature?villageId="+this.villageId+"&isVillager="+this.detailsInfo.village_view.is_villager}),this.hideModal()):"3"==e?(i.navigateTo({url:"../modal/homestay/homestay?villageId="+this.villageId+"&isVillager="+this.detailsInfo.village_view.is_villager}),this.hideModal()):"4"==e?i.showToast({title:"完善中，耐心等待",icon:"none"}):"5"==e?(i.navigateTo({url:"../chat/publishDynamic/publishDynamic"}),this.hideModal()):i.showToast({title:"完善中，耐心等待",icon:"none"})},setClick:function(){""==detailsInfo.village_view.is_villager?i.showToast({title:"您还不是村管理哦",icon:"none"}):i.navigateTo({url:"../villageManager/villageManager"})},manageClick:function(){i.navigateTo({url:"../villageSet/villageManager/villageManager?villageId="+this.detailsInfo.village_view.village_id})},locationClick:function(){var e=parseFloat(this.detailsInfo.village_view.latitude),t=parseFloat(this.detailsInfo.village_view.longitude);i.openLocation({latitude:e,longitude:t,success:function(){}})},reviseClick:function(){var e=this.detailsInfo.village_view.village_name;i.navigateTo({url:"../villageIntroduce/villageIntroduce?villageId="+this.villageId+"&villageName="+e+"&villageContent="+this.detailsInfo.village_view.village_intro})},applyVillager:function(){i.navigateTo({url:"../villageSet/applyVillager/applyVillager"})},attentionClick:function(e){var t=this;t.$request.httpTokenRequest(t.$api.addAttention,t.$api.post,{Key:t.$api.Key,Client:t.$api.CLIENT,Version:t.$api.VERSION,attentionMemberId:e}).then(function(e){200===e.data.flag?t.villageDynamics():i.showToast({title:e.data.msg,icon:"none"})})},showModal:function(i){this.modalName=i.currentTarget.dataset.target},hideModal:function(i){this.modalName=null},detailsInit:function(){var e=this;e.$request.httpTokenRequest(e.$api.villageInfo,e.$api.get,{Key:e.$api.Key,Client:e.$api.CLIENT,Version:e.$api.VERSION,latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),villageId:e.villageId}).then(function(t){200===t.data.flag?(e.detailsInfo=t.data.data,e.videoImage=""==e.detailsInfo.village_view.village_video_url?"".concat(e.$env.img1,"details_upload_video.png"):"".concat(e.$env.img1,"details_video@2x.png")):i.showToast({title:t.data.msg,icon:"none"})})},villageDynamics:function(){var e=this;e.$request.httpTokenRequest(e.$api.villageDynamics,e.$api.get,{Key:e.$api.Key,Client:e.$api.CLIENT,Version:e.$api.VERSION,Latitude:e.latitude,Longitude:e.longitude,villageId:e.villageId}).then(function(t){200===t.data.flag?(e.villageListInfo=t.data.data.data_list,console.log(a(e.villageListInfo.length," at pages/details/details.vue:628"))):i.showToast({title:t.data.msg,icon:"none"})})},joinVillage:function(){var e=this;i.showModal({content:"确定要加入本村？",cancelText:"再考虑下",confirmText:"确定",success:function(t){if(t.confirm){var n=e;n.$request.httpTokenRequest(n.$api.JoinVillage,n.$api.post,{Key:n.$api.Key,Client:n.$api.CLIENT,Version:n.$api.VERSION,villageId:n.villageId}).then(function(e){200===e.data.flag?n.detailsInit():i.showToast({title:e.data.msg,icon:"none"})})}else t.cancel&&console.log(a("用户点击取消"," at pages/details/details.vue:669"))}})},exitVillage:function(){var e=this;i.showModal({content:"确定要退出本村？",cancelText:"再考虑下",confirmText:"确定",success:function(t){var a=e;a.$request.httpTokenRequest(a.$api.exitVillage,a.$api.post,{Key:a.$api.Key,Client:a.$api.CLIENT,Version:a.$api.VERSION}).then(function(e){200===e.data.flag?a.detailsInit():i.showToast({title:e.data.msg,icon:"none"})})}})},villagerListClick:function(){i.navigateTo({url:"../chat/villagerList/villagerList"})},commentClick:function(){i.switchTab({url:"../chat/chatLine/chatLine"})}},onLoad:function(e){var t=this;t.userInfo=i.getStorageSync("userInfo"),t.latitude=i.getStorageSync("getLatitude")||e.latitude,t.longitude=i.getStorageSync("getLongitude")||e.longitude,t.$api.Key=t.userInfo.key,t.villageId=e.villageId},onShow:function(){this.detailsInit(),this.villageDynamics()}};e.default=n}).call(this,t("6e42")["default"],t("0de9")["default"])},"1b3d":function(i,e,t){"use strict";var a=function(){var i=this,e=i.$createElement;i._self._c},n=[];t.d(e,"a",function(){return a}),t.d(e,"b",function(){return n})},6812:function(i,e,t){"use strict";(function(i){t("fbf9"),t("921b");a(t("66fd"));var e=a(t("6fc5"));function a(i){return i&&i.__esModule?i:{default:i}}i(e.default)}).call(this,t("6e42")["createPage"])},"6fc5":function(i,e,t){"use strict";t.r(e);var a=t("1b3d"),n=t("d40a");for(var l in n)"default"!==l&&function(i){t.d(e,i,function(){return n[i]})}(l);t("fa55");var o=t("2877"),s=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"0237e54e",null);e["default"]=s.exports},d40a:function(i,e,t){"use strict";t.r(e);var a=t("0512"),n=t.n(a);for(var l in a)"default"!==l&&function(i){t.d(e,i,function(){return a[i]})}(l);e["default"]=n.a},fa55:function(i,e,t){"use strict";var a=t("0480"),n=t.n(a);n.a}},[["6812","common/runtime","common/vendor"]]]);