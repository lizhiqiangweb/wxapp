(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chat/chatList/chatList"],{"1b2a":function(t,e,a){},"3d3d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"61e4":function(t,e,a){"use strict";(function(t){a("fbf9"),a("921b");n(a("66fd"));var e=n(a("d723"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"70ca":function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("0acf");i(a("e1b1"));function i(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{Conversation:null,TabCur:0,scrollLeft:0,value:"0",relateBg:"".concat(this.$env.img1,"ranking.png"),publish:"".concat(this.$env.img1,"publish@2x.png"),share:"".concat(this.$env.img1,"relay@2x.png"),msg:"".concat(this.$env.img1,"comment@2x.png"),click:"".concat(this.$env.img1,"help@2x.png"),add:"".concat(this.$env.img1,"weixin_add@2x.png"),weixin_icon:"".concat(this.$env.img1,"weixin_icon@2x.png"),chat_p:"".concat(this.$env.img1,"chat_p@2x.png"),PageIndex:1,PageSize:10,chatInfo:[],nav:[{name:"聊天"},{name:"好友"},{name:"关注"},{name:"粉丝"}]}},methods:{getConversation:function(){var e=t.getStorageSync("userInfo");this.JIM.login({username:e.member_nickname,password:"12"}).onSuccess(function(e){console.log(n("55555555555555"," at pages/chat/chatList/chatList.vue:134")),console.log(n("%c%s","color: red; font-size: 24px;","登录成功"," at pages/chat/chatList/chatList.vue:135")),console.log(n(e," at pages/chat/chatList/chatList.vue:136")),t.showToast({title:"登录成功"}),t.setStorage({key:"username",data:a.$data.username,success:function(){t.reLaunch({url:"../index/index"})}})}).onFail(function(e){console.log(n("JIM -登录失败"," at pages/chat/chatList/chatList.vue:153")),t.showToast({title:"登录失败"})});var a=this;this.JIM.getConversation().onSuccess(function(e){console.log(n("消息列表："," at pages/chat/chatList/chatList.vue:160")),console.log(n(e.conversations," at pages/chat/chatList/chatList.vue:161")),a.$data.Conversation=e.conversations.reverse();for(var i=0;i<e.conversations.length;i++)a.get_message_time(e.conversations[i].mtime,i),a.get_avatar(e.conversations[i].avatar,i);t.hideLoading()}).onFail(function(e){t.hideLoading()}),this.JIM.onSyncConversation(function(t){console.log(n("离线消息:"," at pages/chat/chatList/chatList.vue:193")),console.log(n(t," at pages/chat/chatList/chatList.vue:194"))}),this.JIM.onEventNotification(function(t){console.log(n(t," at pages/chat/chatList/chatList.vue:198"))}),this.JIM.onUserInfUpdate(function(t){console.log(n("onUserInfUpdate : "," at pages/chat/chatList/chatList.vue:202")),console.log(n(t," at pages/chat/chatList/chatList.vue:203"))})},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1),"1"==t.currentTarget.dataset.id?(this.value="1",this.listInfo(1)):"0"==t.currentTarget.dataset.id?this.value="0":"2"==t.currentTarget.dataset.id?(this.value="2",this.listInfo(2)):"3"==t.currentTarget.dataset.id&&(this.value="3",this.listInfo(3))},goUpload:function(e){t.navigateTo({url:"../addPic/addPic"})},listInfo:function(e){var a=this;a.$request.httpTokenRequest(a.$api.getFriendList,a.$api.get,{Key:a.$api.Key,Client:a.$api.CLIENT,Version:a.$api.VERSION,PageIndex:a.PageIndex,PageSize:a.PageSize,friendType:e}).then(function(e){200===e.data.flag?a.chatInfo=e.data.data.data_list:t.showToast({title:e.data.msg,icon:"none"})})},getChatroomVillagerList:function(){var e=this;e.$request.httpTokenRequest(e.$api.getChatroomVillagerList,e.$api.get,{Key:e.$api.Key,Client:e.$api.CLIENT,Version:e.$api.VERSION,PageIndex:e.PageIndex,PageSize:e.PageSize}).then(function(a){200===a.data.flag?e.chatInfo=a.data.data.data_list:t.showToast({title:a.data.msg,icon:"none"})})},getChatroomNum:function(){var e=this;e.$request.httpTokenRequest(e.$api.getChatroomNum,e.$api.get,{Key:e.$api.Key,Client:e.$api.CLIENT,Version:e.$api.VERSION}).then(function(e){200===e.data.flag||t.showToast({title:e.data.msg,icon:"none"})})},shareClick:function(){t.navigateTo({url:"../../share/share"})}},onLoad:function(){this.userInfo=t.getStorageSync("userInfo"),this.$api.Key=this.userInfo.key,this.getChatroomVillagerList(),this.getChatroomNum()}};e.default=o}).call(this,a("6e42")["default"],a("0de9")["default"])},"815e":function(t,e,a){"use strict";a.r(e);var n=a("70ca"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},d723:function(t,e,a){"use strict";a.r(e);var n=a("3d3d"),i=a("815e");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("f66f");var s=a("2877"),c=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"335c401e",null);e["default"]=c.exports},f66f:function(t,e,a){"use strict";var n=a("1b2a"),i=a.n(n);i.a}},[["61e4","common/runtime","common/vendor"]]]);