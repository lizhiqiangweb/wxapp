{"version":3,"sources":["webpack:///D:/Git/wxapp/mini-village/main.js","webpack:///D:/Git/wxapp/mini-village/pages/chat/chatDialogue/chatDialogue.vue?c954","webpack:///D:/Git/wxapp/mini-village/pages/chat/chatDialogue/chatDialogue.vue?61f9","webpack:///D:/Git/wxapp/mini-village/pages/chat/chatDialogue/chatDialogue.vue?176e","webpack:///D:/Git/wxapp/mini-village/pages/chat/chatDialogue/chatDialogue.vue?3f18","webpack:///D:/Git/wxapp/mini-village/pages/chat/chatDialogue/chatDialogue.vue","webpack:///D:/Git/wxapp/mini-village/pages/chat/chatDialogue/chatDialogue.vue?247e","webpack:///D:/Git/wxapp/mini-village/pages/chat/chatDialogue/chatDialogue.vue?db0f"],"names":["createPage","Page","data","InputBottom","chatData","news","content","headInfo","inputValue","withdrawShow","scrollTop","avatarImgUrl","methods","InputFocus","e","InputBlur","target","value","onMsgReceive","that","JIM","console","log","messages","sendMsg","text","sendSingleMsg","username","nickName","appkey","onSuccess","msg","push","msg_body","create_time","ctime_ms","updateConversation","uni","setStorageSync","onFail","getChatData","getStorage","key","success","res","i","length","from_username","msgs","setStorage","scrollToBottom","query","createSelectorQuery","select","boundingClientRect","exec","pageScrollTo","duration","avatarUrl","avatar","indexOf","getResource","url","getUserInfo","$request","phpTokenRequest","$api","GetMemberInfo","get","Key","Client","CLIENT","Version","VERSION","then","flag","mounted","onLoad","options","resetUnreadCount","setNavigationBarTitle","title","onShow","filters","formatDate","date","Date","y","getFullYear","MM","getMonth","d","getDate","h","getHours","m","getMinutes","s","getSeconds"],"mappings":"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","file":"pages/chat/chatDialogue/chatDialogue.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/chat/chatDialogue/chatDialogue.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./chatDialogue.vue?vue&type=template&id=6ccc971c&scoped=true&\"\nimport script from \"./chatDialogue.vue?vue&type=script&lang=js&\"\nexport * from \"./chatDialogue.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chatDialogue.vue?vue&type=style&index=0&id=6ccc971c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ccc971c\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6ccc971c', component.options)\n    } else {\n      api.reload('6ccc971c', component.options)\n    }\n    module.hot.accept(\"./chatDialogue.vue?vue&type=template&id=6ccc971c&scoped=true&\", function () {\n      api.rerender('6ccc971c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Git/wxapp/mini-village/pages/chat/chatDialogue/chatDialogue.vue\"\nexport default component.exports","export * from \"-!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatDialogue.vue?vue&type=template&id=6ccc971c&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.chatData, function(item, index) {\n    var f0 = _vm._f(\"formatDate\")(item.content.create_time)\n\n    return {\n      $orig: _vm.__get_orig(item),\n      f0: f0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatDialogue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatDialogue.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport Vue from 'vue'\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tInputBottom: 0,\n\t\t\t\tchatData: [],\n\t\t\t\tnews: [],\n\t\t\t\tcontent: [],\n\t\t\t\theadInfo: [],\n\t\t\t\tinputValue: '',\n\t\t\t\twithdrawShow: 0,\n\t\t\t\tscrollTop: 0,\n\t\t\t\tavatarImgUrl: ''\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tInputFocus(e) {\n\t\t\t\tthis.inputValue = '';\n\t\t\t},\n\t\t\tInputBlur(e) {\n\t\t\t\tthis.InputBottom = 0\n\t\t\t\tthis.inputValue = e.target.value;\n\t\t\t},\n\t\t\t// 聊天消息监听 \n\t\t\tonMsgReceive() {\n\t\t\t\tvar that = this;\n\t\t\t\tthat.JIM.onMsgReceive(function(data) {\n\t\t\t\t\tconsole.log('聊天消息监听', data.messages)\n\t\t\t\t\t// if(data.messages[0].from_username==that.news.username) {\n\t\t\t\t\t// \tthat.chatData.push({\n\t\t\t\t\t// \t\tmsg_body: {\n\t\t\t\t\t// \t\t\ttext: data.messages[0].content.msg_body.text,\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\tcreate_time: data.messages[0].content.create_time\n\t\t\t\t\t// \t})\n\t\t\t\t\t// }\n\t\t\t\t});\n\t\t\t},\n\t\t\tsendMsg(text) {\n\t\t\t\tvar that = this;\n\t\t\t\tthat.JIM.sendSingleMsg({\n\t\t\t\t\t'target_username' : that.news.username,\n\t\t\t\t\t'target_nickname' : that.news.nickName,\n\t\t\t\t\t'content' : text,\n\t\t\t\t\t'appkey' : that.news.appkey\n\t\t\t\t}).onSuccess(function(data, msg) {\n\t\t\t\t\tconsole.log('发送成功', data);\n\t\t\t\t\tthat.chatData.push({\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\tmsg_body: {\n\t\t\t\t\t\t\t\ttext: msg.content.msg_body.text,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreate_time: data.ctime_ms\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthat.InputFocus();\n\t\t\t\t\t// 更新回话消息\n\t\t\t\t\tthat.JIM.updateConversation({\n\t\t\t\t\t\t'appkey' : that.news.appkey,\n\t\t\t\t\t\t'username' : that.news.username\n\t\t\t\t\t});\n\t\t\t\t\tuni.setStorageSync('newChatData', that.chatData)\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\tconsole.log('发送失败', data)\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetChatData() {\n\t\t\t\tvar that = this;\n\t\t\t\tuni.getStorage({\n\t\t\t\t    key: 'chatData',\n\t\t\t\t    success: function (res) {\n\t\t\t\t        for(let i = 0; i < res.data.length; i++) {\n\t\t\t\t\t\t\tif(res.data[i].from_username===that.news.username) {\n\t\t\t\t\t\t\t\tif(that.news.username) {\n\t\t\t\t\t\t\t\t\tthat.chatData = res.data[i].msgs;\n\t\t\t\t\t\t\t\t\t// console.log(res.data[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t    }\n\t\t\t\t});\n\t\t\t\tthat.JIM.onMsgReceive(function(data) {\n\t\t\t\t\tconsole.log(\"实时聊天消息\", data)\n\t\t\t\t\tthat.chatData.push({\n\t\t\t\t\t\tcontent: data.messages[0].content\n\t\t\t\t\t});\n\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t'newChatData': that.chatData\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t},\n\t\t\t// withdraw() {\n\t\t\t// \tvar that = this;\n\t\t\t// \tthat.withdraw = 1;\n\t\t\t// }\n\t\t\t// 滚动至聊天底部\n\t\t\tscrollToBottom() {\n\t\t\t\tlet that = this;\n\t\t\t\tlet query = uni.createSelectorQuery();\n\t\t\t\tquery.select('#msglistview').boundingClientRect();\n\t\t\t\tquery.exec((res) => {\n\t\t\t\t\tuni.pageScrollTo({\n\t\t\t\t\t\tduration: 0,\n\t\t\t\t\t\tscrollTop: 9999\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tavatarUrl() {\n\t\t\t\tvar that = this;\n\t\t\t\tif(that.news.avatar.indexOf('https')!==-1) { //判断头像是否是微信获取还是极光IM设置\n\t\t\t\t\tthat.avatarImgUrl = that.news.avatar\n\t\t\t\t} else {\n\t\t\t\t\tthat.JIM.getResource({\n\t\t\t\t\t\t'media_id' : that.news.avatar,\n\t\t\t\t\t}).onSuccess(function(res) {\n\t\t\t\t\t\tthat.avatarImgUrl = res.url\n\t\t\t\t\t}).onFail(function(res) {\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t},\n\t\t\tgetUserInfo() {\n\t\t\t\tlet that = this\n\t\t\t\tthat.$request.phpTokenRequest(that.$api.GetMemberInfo, that.$api.get, {\n\t\t\t\t\tKey: that.$api.Key,\n\t\t\t\t\tClient: that.$api.CLIENT,\n\t\t\t\t\tVersion: that.$api.VERSION,\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tif (res.data.flag === 200) {\n\t\t\t\t\t\tthat.headInfo = res.data.data\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.getChatData();\n\t\t\t// this.getHositoryNews();\n\t\t\tthis.avatarUrl();\n \t\t},\n\n\t\tonLoad(options) {\n\t\t\tthis.news = options;\n\t\t\t// 重置回话未读\n\t\t\tthis.JIM.resetUnreadCount({\n\t\t\t\t'username' : this.news.username\n\t\t    });\n\t\t\t//动态设置标题\n\t\t\tuni.setNavigationBarTitle({\n\t\t\t    title: this.news.nickName\n\t\t\t});\n\t\t\tthis.getUserInfo();\n\t\t\tthis.scrollToBottom();\n\t\t},\n\t\tonShow() {\n\t\t\tthis.onMsgReceive();\n\t\t},\n\t\tfilters: {\n\t\t  formatDate: function (value) {\n\t\t\tlet date = new Date(value);\n\t\t\tlet y = date.getFullYear();\n\t\t\tlet MM = date.getMonth() + 1;\n\t\t\tMM = MM < 10 ? ('0' + MM) : MM;\n\t\t\tlet d = date.getDate();\n\t\t\td = d < 10 ? ('0' + d) : d;\n\t\t\tlet h = date.getHours();\n\t\t\th = h < 10 ? ('0' + h) : h;\n\t\t\tlet m = date.getMinutes();\n\t\t\tm = m < 10 ? ('0' + m) : m;\n\t\t\tlet s = date.getSeconds();\n\t\t\ts = s < 10 ? ('0' + s) : s;\n\t\t\t// return y + '-' + MM + '-' + d + ' ' + h + ':' + m + ':' + s;\n\t\t\treturn h + ':' + m\n\t\t  }\n\t\t}\n\t}\n","import mod from \"-!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatDialogue.vue?vue&type=style&index=0&id=6ccc971c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatDialogue.vue?vue&type=style&index=0&id=6ccc971c&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}